<html>
    <head>
        <title>Color operation samples</title>
        <script type="text/javascript" src="/src/pixel.js"></script>
        <script type="text/javascript" src="/src/nicepic.js"></script>

        <script type="text/javascript">
            var image = nicepic.load("/img/dog.png");

            function btnOriginal() {
                image.then(nicepic._toCanvas("destination", 0, 0, true))
                     .catch(function(err) { alert(err); });
            }

            function btnInverse() {
                image.then(nicepic._inverse)
                     .then(nicepic._toCanvas("destination"));
            }

            function btnSepia() {
                image.then(nicepic._sepia)
                     .then(nicepic._toCanvas("destination"));
            }

            function btnInstantCamera() {
                image.then(nicepic._instantCamera)
                     .then(nicepic._toCanvas("destination"));
            }

            function btnGray() {
                image.then(nicepic._gray)
                     .then(nicepic._toCanvas("destination"));
            }

            function btnBinary() {
                image.then(nicepic._gray)
                     .then(nicepic._binary(77))
                     .then(nicepic._toCanvas("destination"));
            }

            function onFileChange(files) {
                nicepic.load(files[0])
                        .then(function(img) {
                            image = Promise.resolve(img);
                            btnOriginal();
                        }).catch(function(err) { alert(err); });
            }
        </script>

    </head>
    <body onload="btnOriginal();">
        <p>
        <button onclick="btnOriginal()">Original</button>&nbsp;
        <button onclick="btnInverse()">Inverse</button>&nbsp;
        <button onclick="btnSepia()">Sepia</button>&nbsp;
        <button onclick="btnInstantCamera()">Instant Camera</button>&nbsp;
        <button onclick="btnGray()">Grayscale</button>&nbsp;
        <button onclick="btnBinary()">Binary</button>&nbsp;
        </p>
        <p>Or <input type="file" id="fileInput" size="60" onchange="onFileChange(this.files)" /></p>
    	<canvas id="destination" width="800" height="800">
            Destination canvas
        </canvas>
   	</body>
</html>	