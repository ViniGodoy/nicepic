<html>
<head>
    <title>Color operation samples</title>
    <script type="text/javascript" src="/src/pixel.js"></script>
    <script type="text/javascript" src="/src/nicepic.js"></script>

    <script type="text/javascript">
        var image = nicepic.load("/img/bird.png").then(nicepic._toCanvas("original"));
        var mask = nicepic.load("/img/birdmask.png").then(nicepic._setMask).then(nicepic._toCanvas("mask"));

        function btnSepia() {
            image.then(nicepic._sepia)
                    .then(nicepic._toCanvas("final"));
        }

        function btnColorTransform() {
            image.then(nicepic._colorTransform([1.0, 0.5, 0.5]))
                 .then(nicepic._toCanvas("final"));
        }

        function btnGray() {
            image.then(nicepic._gray)
                 .then(nicepic._toCanvas("final"));
        }
        function btnBlack() {
            image.then(nicepic._paint([0,0,50]))
                 .then(nicepic._toCanvas("final"));
        }

        function btnInvertMask() {
            nicepic.setMask(null);
            mask = mask.then(nicepic._inverse).then(nicepic._setMask).then(nicepic._toCanvas("mask"));
        }

    </script>

</head>
<body>
<p>Scroll down to see the effect.</p>
<p>Original image.</p>
<p>
<canvas id="original" width="640" height="427">
    Source image canvas
</canvas>
</p>
<p>Mask</p>
<p>
<canvas id="mask" width="640" height="427">
    Mask
</canvas>
</p>
<button onclick="btnSepia()">Sepia</button>&nbsp;
<button onclick="btnColorTransform()">Color transform</button>&nbsp;
<button onclick="btnGray()">Grayscale</button>&nbsp;
<button onclick="btnBlack()">Clear</button>&nbsp;
<button onclick="btnInvertMask()">Invert mask</button>&nbsp;
<p>Final image</p>
<p>
    <canvas id="final" width="640" height="427">
        Destination canvas
    </canvas>
</p>
</body>
</html>